<!-- Page wrapper with spacing -->
<div class="px-3 py-10 mx-auto">

  <!-- Outer Box -->
  <div class="bg-white border border-gray-200 rounded-xl shadow-sm px-8 py-10">

    <!-- Title -->
    <h1 class="text-2xl font-bold text-gray-800 mb-6">Create New Ticket</h1>

    <form (ngSubmit)="submitForm()" class="space-y-6">

      <!-- Title -->
      <div>
        <label for="ticket-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
        <input id="ticket-title" type="text" [(ngModel)]="ticket.title" name="title"
               class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500"
               placeholder="Short summary..." required />
      </div>

      <!-- Description -->
      <div>
        <label for="ticket-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
        <textarea id="ticket-description" [(ngModel)]="ticket.description" name="description" rows="4"
                  class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  placeholder="Describe the issue in detail..." required></textarea>
      </div>

      <!-- Category & Subcategory -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Category -->
        <div class="relative">
          <label for="ticket-category" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
          <select id="ticket-category" [(ngModel)]="ticket.category" name="category"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="" disabled selected>Select Category</option>
            <option *ngFor="let c of getCategoryKeys()" [value]="c">{{ c }}</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>

        <!-- Subcategory -->
        <div class="relative">
          <label for="ticket-subcategory" class="block text-sm font-medium text-gray-700 mb-1">Subcategory</label>
          <select id="ticket-subcategory" [(ngModel)]="ticket.subcategory" name="subcategory"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="" disabled selected>Select Subcategory</option>
            <option *ngFor="let sc of subcategories" [value]="sc">{{ sc }}</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Priority, Impact, Urgency -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="relative">
          <label for="ticket-priority" class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
          <select id="ticket-priority" [(ngModel)]="ticket.priority" name="priority"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option>High</option>
            <option>Medium</option>
            <option>Low</option>
            <option>Critical</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>

        <div class="relative">
          <label for="ticket-impact" class="block text-sm font-medium text-gray-700 mb-1">Impact</label>
          <select id="ticket-impact" [(ngModel)]="ticket.impact" name="impact"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option>Individual</option>
            <option>Team</option>
            <option>Organization</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>

        <div class="relative">
          <label for="ticket-urgency" class="block text-sm font-medium text-gray-700 mb-1">Urgency</label>
          <select id="ticket-urgency" [(ngModel)]="ticket.urgency" name="urgency"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Status, Assigned To, Due Date -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="relative">
          <label for="ticket-status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
          <select id="ticket-status" [(ngModel)]="ticket.status" name="status"
                  class="appearance-none block w-full pr-10 px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option>New</option>
            <option>In Progress</option>
            <option>On Hold</option>
            <option>Resolved</option>
          </select>
          <div class="pointer-events-none absolute top-11 right-3 transform -translate-y-1/2 text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>

        <div>
          <label for="ticket-assignedTo" class="block text-sm font-medium text-gray-700 mb-1">Assigned To</label>
          <input id="ticket-assignedTo" type="text" [(ngModel)]="ticket.assignedTo" name="assignedTo"
                 class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="e.g. Tanmay">
        </div>

        <div>
          <label for="ticket-dueDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
          <input id="ticket-dueDate" type="date" [(ngModel)]="ticket.dueDate" name="dueDate"
                 class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>
      </div>

      <!-- Location -->
      <div>
        <label for="ticket-location" class="block text-sm font-medium text-gray-700 mb-1">Location</label>
        <input id="ticket-location" type="text" [(ngModel)]="ticket.location" name="location"
               class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500"
               placeholder="Office location or department">
      </div>

      <!-- Attachments -->
      <div>
        <label for="ticket-attachments" class="block text-sm font-medium text-gray-700 mb-1">Attachments</label>
        <input id="ticket-attachments" type="file" multiple (change)="handleFileChange($event)"
               class="block w-full border border-gray-300 rounded-lg px-3 py-2 text-sm file:mr-4 file:py-2 file:px-3 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
      </div>

      <!-- Submit -->
      <div>
        <button type="submit"
                class="inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white text-sm font-medium rounded-lg shadow hover:bg-blue-700 transition">
          Submit Ticket
        </button>
      </div>
    </form>
  </div>
</div>
